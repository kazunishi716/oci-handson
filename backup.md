# OCIハンズオン-バックアップ編
- ハンズオン-作業イメージ&前提
- バックアップポリシーの作成
- ブートボリュームのバックアップポリシーの割り当て

## ハンズオン-作業イメージ&前提
- あらかじめ作成したComputeにアタッチされているブートボリュームに対してバックアップポリシーの設定を実行します

下記がこのハンズオンで実施する構成イメージです。
![image](https://github.com/kazunishi716/oci-handson/assets/153155301/b3a6c5f8-63c0-48bd-aa7c-942cb7f0490b)

## バックアップポリシーの作成
バックアップポリシーはあらかじめOracleにてGold,Silver,Bronzeの3種類のポリシーが用意されております。
今回はそれとは別にユーザ側で任意/カスタマイズ可能なポリシールールを作成してみます。

なお、Oracleから提供されているGold,Silver,Bronzeのポリシールールは以下です。
![image](https://github.com/kazunishi716/oci-handson/assets/153155301/2925cf59-a8ba-4e13-8b85-e3d88e420842)

### カスタム用バックアップポリシーの作成
1. メニュー > ストレージ > ブロック・ストレージ > バックアップ・ポリシーにアクセスします
2. 「バックアップポリシーの作成」をクリック
3. 以下の項目を入力し、バックアップ・ポリシーの作成 ボタンを押します
  1. 名前 - custom-policy
  2. コンパートメント - handson
  3. クロス・リージョン・コピーのターゲット - なし

![image](https://github.com/kazunishi716/oci-handson/assets/153155301/2069430f-f70f-4c6b-b51e-583e9f4c84c0)

### カスタム用バックアップポリシーのルール設定
1. メニュー > ストレージ > ブロック・ストレージ > バックアップ・ポリシー > バックアップ・ポリシーの詳細にアクセスします
2. 「スケジュールの追加」をクリック
3. 以下の項目を入力し、スケジュールの追加 ボタンを押します
  1. スケジュール・タイプ - 毎週
  2. 該当週の日 - 日曜日
  3. 該当日の時間 - 00:00
  4. 週での保持期間 - 1
  5. バックアップ・タイプ - 完全
  6. タイムゾーン - UTC

![image](https://github.com/kazunishi716/oci-handson/assets/153155301/914f0d96-96d1-41fe-9024-363abbfe10b9)

4. 再度「スケジュールの追加」をクリックし、以下の項目を入力し、スケジュールの追加 ボタンを押します
  1. スケジュール・タイプ - 毎日
  2. 該当日の時間 - 00:00
  3. 週での保持期間 - 7
  4. バックアップ・タイプ - 増分
  5. タイムゾーン - UTC

この作業により、毎週月曜日に完全バックアップの取得、毎日の増分バックアップの取得の設定されたバックアップ・ポリシーが作成できました。
必要なポリシーがある場合は随時、追加/修正をしてください。


![image](https://github.com/kazunishi716/oci-handson/assets/153155301/db13d5f0-c3d8-4da9-87fe-43cee2ab8c4c)

## ブートボリュームのバックアップポリシーの割り当て
1. メニュー > ストレージ > ブロック・ストレージ にアクセスします
2. 左側のカテゴリよりブートボリュームを選択 > 任意のブートボリューム を選択します
3. 編集 ボタンをクリックし、下部のバックアップ・ポリシーにて先ほど作成した custom-policy を選択し変更の保存を実施します

![image](https://github.com/kazunishi716/oci-handson/assets/153155301/99759596-dc67-4d78-b9e8-3cef6ff02d65)


これでカスタムバックアップ・ポリシーの作成と反映の作業は完了となります。
今回はブートボリュームを対象とした作業でしたが、ブロックボリュームも同様の手順で設定可能です。
